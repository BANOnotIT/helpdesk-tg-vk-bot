# Как работает tg.py

## TgApi(Api)

Первое что нам попадается на глаза - это класс TgApi. В нём хранится пара свойств и несколько методов, а каких?

С url'ом всё понятно, это просто ссылка на сайтик, к которому мы обращаемся, чтобы сервера тележки что-нибудь сделали.
А что такое token? ОК, вот мы просим что-нибудь сделать телеграм, а как он поймёт КТО ТЫ? Честное слово мессенджер не принимает, только токен, который и поможет ему понять, что я правда владелец этого бота, и да, я хочу чтоб мой бот кинул сообщение пользователю. Токен берётся у @botfather 'а.

## Про методы

### Метод __init__
У него только один аргумент (по св-вам питончика self - это просто ссылка на себя) - token. Сохраняем его и сразу переделываем url чтоб не мучаться.

### Месод exec
Эта штука просто берёт и кидает запрос на сервера тележки. Этот метод принимает два аргумента: строку(то что мы хотим сделать) и доп. параметры(прямо как аргументы у функции).

### Месод message
Этот метод кидает сообщение. Что самое главное, номер чата, который обязательно нужен, чтоб телеграм понял куда отправлять-то сообщение, мы уже знаем, значит, нам нужен только текст сообщения

### Месод get_message
Какъ намъ изволитъ разсказывать про свою программу самъ создатель ея, он просто возвращает класс TgMessage, с которым работают все остальные функции. Но, там ещё есть пара действий.
1) Пробиваем юзера по базам данных, а если его ещё нет, то заносим и обязательно запоминаем это(логируем)
2) Понимаем номер чата
3) Понимаем, что это за месджъ(команда или просто текст)
4) И уже сейчас возвращаем TgMessage

## Тот самый TgMessage
Вот я пишу: "TgMessage, TgMessage", а что это такое?
Очевидно, что работа с тележкой и вкшечкой происходит по-разному, это значит, что нам требуется работать с этими сообщениями по-разному, и ответ надо отправлять по-разному(разные ссылки), а ООП'ерам не пристало писать switch/case.

### Про переменные класа
Итак, на строчке, где объявляется класс мы видим, что в скобках появилось что-то, а именно класс, от которого TgMessage наследуется. В Message уже есть переменные: текст, юзверь, тип сообщения(команда или просто текст), номер чата. Ничго нового не добавляется, только говорим, что platform у нас телеграм. Плюс, я вижу, что какая-то переменная api равна None. Что это значит? Здесь должен быть объект TgApi. Зачем? Чтобы моч работать с API тележки из объекта сообщение, потому что так удобнее.
В этом классе есть единственный метод: reply.

### Месод reply
Этот метода принимате на вход строчку и выкидывает её серверам телеграма, с помощью метода, который уже есть в переменной api.